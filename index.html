<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Termômetro Emocional</title>
    <meta name="description" content="Rastreamento e regulação emocional" />
    <link rel="manifest" href="./manifest.json" />
    <style>
      body {
        margin: 0;
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',
          'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',
          sans-serif;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
      }

      /* Estilos exclusivos para Impressão/PDF */
      @media print {
        @page {
          margin: 2cm;
        }
        body {
          background: white;
          color: black;
        }
        /* Oculta tudo que não for o relatório quando ele estiver ativo */
        body > div:not(#root),
        #root > div > div.no-print {
          display: none !important;
        }

        .print-force-black {
          color: #000 !important;
          text-shadow: none !important;
        }

        .page-break-inside-avoid {
          page-break-inside: avoid;
        }
      }
    </style>
  </head>
  <body>
    <div id="root">
      <div style="padding: 20px; font-family: sans-serif; text-align: center; color: #666;">
        <h1>Carregando...</h1>
        <p>Se esta mensagem persistir, algo impediu o carregamento da aplicação.</p>
      </div>
    </div>
    <script>
      window.onerror = function(message, source, lineno, colno, error) {
        const root = document.getElementById('root');
        const errorDiv = document.createElement('div');
        errorDiv.style.padding = '20px';
        errorDiv.style.background = '#fee';
        errorDiv.style.border = '1px solid #f00';
        errorDiv.style.color = '#c00';
        errorDiv.style.fontFamily = 'monospace';
        errorDiv.style.margin = '20px';
        errorDiv.innerHTML = `
          <h3>Erro de Carregamento (Global):</h3>
          <p><strong>Msg:</strong> ${message}</p>
          <p><strong>Loc:</strong> ${source}:${lineno}:${colno}</p>
          <pre>${error ? error.stack : ''}</pre>
        `;
        // Append instead of overwrite to keep history if multiple errors
        if (root.innerHTML.includes('Carregando...')) {
            root.innerHTML = '';
        }
        root.appendChild(errorDiv);
        console.error("Global Error Caught:", error);
      };

      window.addEventListener('unhandledrejection', function(event) {
        const root = document.getElementById('root');
        const errorDiv = document.createElement('div');
        errorDiv.style.padding = '20px';
        errorDiv.style.background = '#fff3cd';
        errorDiv.style.border = '1px solid #ffeeba';
        errorDiv.style.color = '#856404';
        errorDiv.style.fontFamily = 'monospace';
        errorDiv.style.margin = '20px';
        errorDiv.innerHTML = `
          <h3>Promise Rejeitada (Unhandled):</h3>
          <p><strong>Reason:</strong> ${event.reason}</p>
        `;
        if (root.innerHTML.includes('Carregando...')) {
            root.innerHTML = '';
        }
        root.appendChild(errorDiv);
        console.error("Unhandled Rejection:", event.reason);
      });
    </script>
    <script type="module" src="/src/index.tsx"></script>
  </body>
</html>
